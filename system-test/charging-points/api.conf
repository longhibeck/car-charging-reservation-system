server {
    listen 80;
    server_name _;

    location ~ ^/api/v1/charging-points/?$ {
        root /usr/share/nginx/html;
        try_files /data.json =404;
        default_type application/json;

        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Methods "GET, OPTIONS";
        add_header Access-Control-Allow-Headers "Content-Type, Authorization";

        # Handle OPTIONS requests for CORS preflight
        if ($request_method = OPTIONS) {
            add_header Access-Control-Allow-Origin *;
            add_header Access-Control-Allow-Methods "GET, OPTIONS";
            add_header Access-Control-Allow-Headers "Content-Type, Authorization";
            add_header Content-Length 0;
            add_header Content-Type text/plain;
            return 204;
        }

        # Only allow GET and OPTIONS methods
        if ($request_method !~ ^(GET|OPTIONS)$) {
            return 405;
        }
    }
}